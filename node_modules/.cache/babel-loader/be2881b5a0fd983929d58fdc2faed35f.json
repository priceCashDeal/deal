{"ast":null,"code":"var _jsxFileName = \"E:\\\\programin\\\\gitigit\\\\cashback\\\\src\\\\component\\\\Home.js\";\nimport React, { useState, useEffect } from 'react';\nimport Product from './Product';\nimport \"./Home.css\";\nimport db from '../firebase';\nimport banner from '../img/banner.png';\nimport Pagination from './Pagination';\n\nfunction Home({\n  search\n}) {\n  const [products, setProducts] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [productsPerPage] = useState(20);\n  const [allproducts, setAllProducts] = useState([]);\n  useEffect(() => {\n    db.collection('products').orderBy('timestamp', 'desc').onSnapshot(snapshot => {\n      setAllProducts(snapshot.docs.map(doc => ({\n        id: doc.id,\n        Retailer: doc.data().retailerName,\n        Product_details: doc.data().productDescription,\n        deal_price: doc.data().dealPrice,\n        product_link: doc.data().productUrl,\n        mrp: doc.data().mrp,\n        img: doc.data().productImage\n      })));\n    });\n  }, []);\n  useEffect(() => {\n    setProducts(allproducts);\n  }, [allproducts]);\n  useEffect(() => {\n    if (search == \"\") {\n      setProducts(allproducts);\n    } else {\n      var productslist = [];\n      allproducts.map(product => {\n        var searchdetails = product.Product_details;\n\n        if (searchdetails && searchdetails.includes(search)) {\n          productslist.push(product);\n          console.log(product);\n        }\n      });\n      console.log(productslist);\n      setProducts(productslist);\n    }\n  }, [search]); //get current post\n\n  const indexOfLastProduct = currentPage * productsPerPage;\n  const indexOfFirstProduct = indexOfLastProduct - productsPerPage;\n  const currentProducts = products.slice(indexOfFirstProduct, indexOfLastProduct); //change page\n\n  const paginate = pageNumber => {\n    var element = document.getElementById(currentPage);\n    element.classList.remove(\"active\");\n    setCurrentPage(pageNumber);\n    var element = document.getElementById(pageNumber);\n    element.classList.add(\"active\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: banner,\n    alt: \"logo image\",\n    className: \"banner__img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home__row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, //need to put a comment for search in discription\n  currentProducts.map(product => {\n    //if (t < 0)\n    return /*#__PURE__*/React.createElement(Product, {\n      key: product.id,\n      Retailer: product.Retailer,\n      Product_details: product.Product_details,\n      deal_price: product.deal_price,\n      product_link: product.product_link,\n      mrp: product.mrp,\n      off: Math.floor((product.mrp - product.deal_price) / product.mrp * 100),\n      img: product.img,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 36\n      }\n    });\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home__row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Pagination, {\n    postsPerPage: productsPerPage,\n    totalPosts: products.length,\n    paginate: paginate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }))));\n}\n\nexport default Home;","map":{"version":3,"sources":["E:/programin/gitigit/cashback/src/component/Home.js"],"names":["React","useState","useEffect","Product","db","banner","Pagination","Home","search","products","setProducts","currentPage","setCurrentPage","productsPerPage","allproducts","setAllProducts","collection","orderBy","onSnapshot","snapshot","docs","map","doc","id","Retailer","data","retailerName","Product_details","productDescription","deal_price","dealPrice","product_link","productUrl","mrp","img","productImage","productslist","product","searchdetails","includes","push","console","log","indexOfLastProduct","indexOfFirstProduct","currentProducts","slice","paginate","pageNumber","element","document","getElementById","classList","remove","add","Math","floor","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Product from './Product';\r\nimport \"./Home.css\";\r\nimport db from '../firebase';\r\nimport banner from '../img/banner.png';\r\nimport Pagination from './Pagination';\r\n\r\nfunction Home({ search }) {\r\n\r\n    const [products, setProducts] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [productsPerPage] = useState(20);\r\n    const [allproducts, setAllProducts] = useState([]);\r\n\r\n\r\n    useEffect(() => {\r\n        db.collection('products').orderBy('timestamp', 'desc').onSnapshot(snapshot => {\r\n            setAllProducts(snapshot.docs.map(doc => ({\r\n                id: doc.id, Retailer: doc.data().retailerName,\r\n                Product_details: doc.data().productDescription\r\n                , deal_price: doc.data().dealPrice\r\n                , product_link: doc.data().productUrl\r\n                , mrp: doc.data().mrp\r\n                , img: doc.data().productImage\r\n            })))\r\n        })\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setProducts(allproducts);\r\n    }, [allproducts]);\r\n\r\n    useEffect(() => {\r\n\r\n        if (search == \"\") {\r\n            setProducts(allproducts);\r\n        }\r\n        else {\r\n            var productslist = [];\r\n            allproducts.map(product => {\r\n                var searchdetails = product.Product_details;\r\n                if (searchdetails && searchdetails.includes(search)) {\r\n                    productslist.push(product);\r\n                    console.log(product);\r\n                }\r\n            });\r\n            console.log(productslist);\r\n            setProducts(productslist);\r\n        }\r\n    }, [search]);\r\n\r\n    //get current post\r\n    const indexOfLastProduct = currentPage * productsPerPage;\r\n    const indexOfFirstProduct = indexOfLastProduct - productsPerPage;\r\n    const currentProducts = products.slice(indexOfFirstProduct, indexOfLastProduct);\r\n\r\n    //change page\r\n    const paginate = pageNumber => {\r\n        var element = document.getElementById(currentPage);\r\n        element.classList.remove(\"active\");\r\n\r\n        setCurrentPage(pageNumber);\r\n        var element = document.getElementById(pageNumber);\r\n        element.classList.add(\"active\");\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {/* <Menu /> */}\r\n            <div className=\"banner\">\r\n                <img src={banner} alt=\"logo image\" className=\"banner__img\" />\r\n            </div>\r\n            <div className=\"home\">\r\n                <div className=\"home__row\">\r\n                    {//need to put a comment for search in discription\r\n                        currentProducts.map(product => {\r\n                            //if (t < 0)\r\n                            return <Product key={product.id} Retailer={product.Retailer} Product_details={product.Product_details}\r\n                                deal_price={product.deal_price}\r\n                                product_link={product.product_link}\r\n                                mrp={product.mrp}\r\n                                off={Math.floor(((product.mrp - product.deal_price) / product.mrp) * 100)}\r\n                                img={product.img} />\r\n                        })}\r\n                </div>\r\n                <div className=\"home__row\">\r\n                    <Pagination postsPerPage={productsPerPage} totalPosts={products.length} paginate={paginate} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n"]},"metadata":{},"sourceType":"module"}